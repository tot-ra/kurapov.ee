"use strict";(self.webpackChunkkurapov_ee=self.webpackChunkkurapov_ee||[]).push([["82821"],{96026:function(n,e,t){t.r(e),t.d(e,{assets:function(){return a},contentTitle:function(){return l},default:function(){return h},frontMatter:function(){return i},metadata:function(){return r},toc:function(){return o}});var r=t(15102),s=t(52676),c=t(22771);let i={title:"\u0422\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0442\u043E\u0434\u0430 \u0433\u0434\u0435 \u0435\u0441\u0442\u044C new instance",date:"2015-04-08T10:00",tags:["tests"]},l=void 0,a={authorsImageUrls:[]},o=[{value:"\u041F\u0440\u043E\u0431\u043B\u0435\u043C\u0430",id:"\u043F\u0440\u043E\u0431\u043B\u0435\u043C\u0430",level:3},{value:"\u041A\u043B\u0430\u0441\u0441 \u044D\u0442\u043E \u043D\u0435 \u043E\u0431\u044C\u0435\u043A\u0442",id:"\u043A\u043B\u0430\u0441\u0441-\u044D\u0442\u043E-\u043D\u0435-\u043E\u0431\u044C\u0435\u043A\u0442",level:3},{value:"\u0420\u0435\u0448\u0435\u043D\u0438\u0435",id:"\u0440\u0435\u0448\u0435\u043D\u0438\u0435",level:3}];function d(n){let e={a:"a",br:"br",code:"code",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.a)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.p,{children:["\u042F \u043A\u043E\u0433\u0434\u0430-\u0442\u043E \u043F\u0438\u0441\u0430\u043B \u043F\u0440\u043E \u0442\u043E \u0447\u0442\u043E \u0432 phpunit \u043D\u0435\u0431\u044B\u043B\u043E \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E\u0441\u0442\u0438 \u043D\u043E\u0440\u043C\u0430\u043B\u044C\u043D\u043E \u043F\u0440\u043E\u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0432\u043D\u0443\u0442\u0440\u0435\u043D\u043D\u0438\u0435 \u043C\u0435\u0442\u043E\u0434\u044B \u043A\u043B\u0430\u0441\u0441\u0430 \u0438 \u043F\u0440\u0438\u0445\u043E\u0434\u0438\u0442\u0441\u044F \u043E\u0431\u0440\u0430\u0449\u0430\u0442\u044C\u0441\u044F \u043A runkit. \u041D\u0435\u0437\u043D\u0430\u044E, \u0431\u044B\u043B\u0430 \u043B\u0438 \u044D\u0442\u043E \u043C\u043E\u044F \u043D\u0435\u0434\u043E\u0440\u0430\u0431\u043E\u0442\u043A\u0430, \u043B\u0438\u0431\u043E \u0441 \u0432\u0435\u0440\u0441\u0438\u0438 3.8 \u043F\u0440\u043E\u0448\u043B\u043E \u0443\u0436\u0435 \u043C\u043D\u043E\u0433\u043E \u0432\u0440\u0435\u043C\u0435\u043D\u0438, \u043D\u043E \u0432 4.5 \u044D\u0442\u0430 \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E\u0441\u0442\u044C \u0435\u0441\u0442\u044C!\xa0\u041C\u043E\u043A\u0438 \u0432 4.5\xa0",(0,s.jsx)(e.a,{href:"https://phpunit.de/manual/current/en/test-doubles.html",children:"\u0441\u0442\u0430\u043B\u0438 \u0443\u0434\u043E\u0431\u043D\u0435\u0439"}),"\xa0\u2014 \u043E\u043D\u0438 \u0443\u043C\u0435\u044E\u0442\xa0",(0,s.jsx)(e.strong,{children:"\u043F\u0435\u0440\u0435\u0437\u0430\u043F\u0438\u0441\u044B\u0432\u0430\u0442\u044C"}),"\xa0\u043A\u0430\u043A \u0432\u0435\u0441\u044C \u043A\u043B\u0430\u0441\u0441, \u0442\u0430\u043A \u0438\xa0",(0,s.jsx)(e.strong,{children:"\u0435\u0433\u043E \u0447\u0430\u0441\u0442\u0438"}),"."]}),"\n",(0,s.jsxs)(e.p,{children:["\u0423 \u043C\u0435\u043D\u044F \u043F\u043E\u0434\u0445\u043E\u0434 \u043A \u0440\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u043A\u0435 \u044D\u0432\u043E\u043B\u044E\u0446\u0438\u043E\u043D\u043D\u044B\u0439 \u0438 \u043A \u0442\u0435\u0441\u0442\u0430\u043C \u043F\u0440\u0430\u0433\u043C\u0430\u0442\u0438\u0447\u043D\u044B\u0439 \u2014 \u0442\u0435\u0441\u0442\u044B \u0434\u043E\u043B\u0436\u043D\u044B \u043F\u043E\u0437\u0432\u043E\u043B\u044F\u0442\u044C\xa0",(0,s.jsx)(e.strong,{children:"\u043F\u043E\u0441\u0442\u0435\u043F\u0435\u043D\u043D\u043E"}),"\xa0\u0443\u043B\u0443\u0447\u0448\u0430\u0442\u044C \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u043E \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u044F. \u0412 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u0439 \u0436\u0438\u0437\u043D\u0438 \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 \u043A\u0430\u043A\u043E\u0439-\u0442\u043E \u0444\u043E\u0440\u043C\u0435, \u0430 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0441\u0442\u044B \u043B\u0435\u043D\u0438\u0432\u044B\u0435 \u0438 \u0442\u0435\u0441\u0442\u044B \u043D\u0435 \u043F\u0438\u0441\u0430\u043B\u0438. \u041F\u043E\u044D\u0442\u043E\u043C\u0443 \u043D\u0430\u0434\u043E \u0443\u043C\u0435\u0442\u044C \u043C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u044B\u043C \u0440\u0435\u0444\u0430\u043A\u0442\u043E\u0440\u0438\u043D\u0433\u043E\u043C \u0434\u043E\u0431\u0430\u0432\u043B\u044F\u0442\u044C \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0435 \u0442\u0435\u0441\u0442\u044B, \u043F\u043E\u0441\u0442\u0435\u043F\u0435\u043D\u043D\u043E \u043F\u0440\u0438\u0432\u043E\u0434\u044F \u043B\u044E\u0434\u0435\u0439 \u0438 \u043F\u043E\u043A\u0440\u044B\u0442\u0438\u0435 \u043A\xa0\u0432\u0435\u0440\u0435 \u0432 \u0411\u043E\u0433\u0430\xa0TDD. \u041F\u043E-\u043E\u043F\u0440\u0430\u0432\u0434\u044B\u0432\u0430\u043B\u0441\u044F, \u0442\u0435\u043F\u0435\u0440\u044C \u043A \u043A\u043E\u043D\u043A\u0440\u0435\u0442\u0438\u043A\u0435.."]}),"\n",(0,s.jsx)(e.h3,{id:"\u043F\u0440\u043E\u0431\u043B\u0435\u043C\u0430",children:"\u041F\u0440\u043E\u0431\u043B\u0435\u043C\u0430"}),"\n",(0,s.jsxs)(e.p,{children:["\u041A\u043E\u0433\u0434\u0430 \u0432\u044B \u043D\u0430\u0447\u0438\u043D\u0430\u0435\u0442\u0435 \u043F\u0438\u0441\u0430\u0442\u044C \u044E\u043D\u0438\u0442 \u0442\u0435\u0441\u0442\u044B \u0434\u043B\u044F \u0441\u0432\u043E\u0438\u0445 \u043A\u043B\u0430\u0441\u0441\u043E\u0432, \u0442\u043E \u043F\u0435\u0440\u0432\u0430\u044F \u043F\u0440\u043E\u0431\u043B\u0435\u043C\u0430 \u0441 \u0447\u0435\u043C \u0432\u044B \u0441\u0442\u0430\u043B\u043A\u0438\u0432\u0430\u0435\u0442\u0435\u0441\u044C \u2014 \u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u0438, \u0432 \u0447\u0430\u0441\u0442\u043D\u043E\u0441\u0442\u0438\xa0",(0,s.jsx)(e.strong,{children:"\u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u043D\u043E\u0432\u044B\u0445 \u044D\u043A\u0437\u0435\u043C\u043F\u043B\u044F\u0440\u043E\u0432"}),"\xa0\u043A\u0430\u043A\u0438\u0445-\u0442\u043E \u043A\u043B\u0430\u0441\u0441\u043E\u0432. \u042D\u0442\u043E \u043A\u0430\u043A \u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u0438 \u0443 \u043B\u044E\u0434\u0435\u0439 \u2014 \u0441\u0438\u0433\u0430\u0440\u0435\u0442\u044B, \u043F\u0438\u0432\u043E, \u0441\u043B\u0430\u0434\u043A\u043E\u0435, \u0434\u0435\u043D\u044C\u0433\u0438, \u043F\u043E\u0440\u043D\u043E."]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.img,{src:t(93141).Z+"",width:"1280",height:"947"}),"\n\u041F\u0440\u0430\u043A\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u0432\u0441\u0435 \u0441\u0440\u0430\u0437\u0443 \u0436\u0435 \u0441\u043E\u0432\u0435\u0442\u0443\u044E\u0442\xa0",(0,s.jsx)(e.strong,{children:"Dependency Injection"}),". \u041C\u043E\u043B \u0432\u044B\u043D\u0435\u0441\u0438\u0442\u0435 \u0432\u0441\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u0438 \u0432 \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0430\u0440\u0433\u0443\u043C\u0435\u043D\u0442\u043E\u0432! \u0412 \u0440\u0435\u0430\u043B\u044C\u043D\u043E\u0439 \u0436\u0438\u0437\u043D\u0438 \u044D\u0442\u043E \u0437\u043D\u0430\u0447\u0438\u0442 \u043F\u0435\u0440\u0435\u0439\u0442\u0438 \u043D\u0430\xa0",(0,s.jsx)(e.strong,{children:"\u0447\u0442\u043E-\u0442\u043E \u043F\u043E\u0441\u043B\u0430\u0431\u0435\u0435"}),"\xa0\u2014 \u044D\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u044B\u0435 \u0441\u0438\u0433\u0430\u0440\u0435\u0442\u044B, \u0432\u0438\u043D\u043E, \u0444\u0440\u0443\u043A\u0442\u044B, \u0431\u043B\u0430\u0433\u043E\u0442\u0432\u043E\u0440\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C \u0438 \u0441\u043F\u043E\u0440\u0442.\xa0\u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, \u0435\u0441\u043B\u0438 \u0443 \u043D\u0430\u0441 \u0435\u0441\u0442\u044C \u0442\u0430\u043A\u043E\u0439 \u043C\u0435\u0442\u043E\u0434 \u0432 \u043A\u043B\u0430\u0441\u0441\u0435, \u0442\u043E \u0435\u0433\u043E \u043F\u0440\u043E\u0431\u043B\u0435\u043C\u043D\u043E \u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C.."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-php",children:"class A{\n    function a($c){\n        $b = new B();\n        return $c * $b->calc(2);\n    }\n}\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u0421 \u0432\u044B\u043D\u0435\u0441\u0435\u043D\u0438\u0435\u043C \u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u0435\u0439,\xa0",(0,s.jsx)(e.strong,{children:"new B"}),"\xa0\u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u043F\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0442\u044C \u043A\u0430\u043A \u0430\u0440\u0433\u0443\u043C\u0435\u043D\u0442.",(0,s.jsx)(e.br,{}),"\n","\u0422\u0435\u043F\u0435\u0440\u044C \u0432 \u0442\u0435\u0441\u0442\u0430\u0445 \u043C\u043E\u0436\u043D\u043E \u0432\u043D\u0435\u0434\u0440\u044F\u0442\u044C \u043A\u0430\u043A\u043E\u0439-\u0442\u043E dummy-\u043E\u0431\u044C\u0435\u043A\u0442. \u042D\u0442\u043E \u0442\u0438\u043F\u0438\u0447\u043D\u043E\u0435 \u0440\u0435\u0448\u0435\u043D\u0438\u0435."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-php",children:"function a($c, B $b){\n    return $c * $b->calc(2);\n}\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u0412\u0442\u043E\u0440\u043E\u0435 \u0440\u0435\u0448\u0435\u043D\u0438\u0435 -\xa0",(0,s.jsx)(e.strong,{children:"\u0438\u043D\u043A\u0430\u043F\u0441\u0443\u043B\u044F\u0446\u0438\u044F + DI"}),". \u041F\u0440\u0430\u043A\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u0442\u043E \u0436\u0435 \u0441\u0430\u043C\u043E\u0435, \u0442\u043E\u043B\u044C\u043A\u043E \u0447\u0442\u043E-\u0431\u044B \u043D\u0435 \u0437\u0430\u0441\u043E\u0440\u044F\u0442\u044C \u0430\u0440\u0433\u0443\u043C\u0435\u043D\u0442\u044B \u0432\u043D\u0443\u0442\u0440\u0435\u043D\u043D\u0438\u043C\u0438 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u0430\u043C\u0438, \u043C\u044B \u0432\u043D\u0435\u0434\u0440\u044F\u0435\u043C \u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u044C \u0432 \u0446\u0435\u043B\u044B\u0439 \u043A\u043B\u0430\u0441\u0441. \u042D\u0442\u043E \u0431\u043E\u043B\u0435\u0435 \u0442\u044F\u0436\u0451\u043B\u0430\u044F \u0444\u043E\u0440\u043C\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u0438 \u2014 \u043C\u043E\u043B \u0434\u0430, \u044F \u043F\u044C\u044E \u043F\u0438\u0432\u043E \u043D\u0435 \u0442\u043E\u043B\u044C\u043A\u043E \u0432 \u043A\u043E\u043C\u043F\u0430\u043D\u0438\u0438, \u043D\u043E \u0438 \u0432 \u0434\u0440\u0443\u0433\u0438\u0445 \u0441\u043B\u0443\u0447\u0430\u044F\u0445 \u0442\u043E\u0436\u0435. \u042D\u0442\u043E \u0443\u0434\u043E\u0431\u043D\u043E \u0442\u0435\u043C \u0447\u0442\u043E \u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u044C \u0441\u0440\u0430\u0437\u0443 \u0432\u0438\u0434\u043D\u0430 (\u043F\u0440\u043E\u0449\u0435 \u0432 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0435 \u043D\u0430\u0439\u0442\u0438 \u043D\u0443\u0436\u043D\u044B\u0439 \u043E\u0442\u0434\u0435\u043B)"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-php",children:"function a($c){\n    return $c * $this->b->calc(2);\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u041E\u0431\u044B\u0447\u043D\u043E \u0442\u0430\u043A\u043E\u0439 \u043F\u043E\u0434\u0445\u043E\u0434 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442 \u043D\u0430 \u043D\u0438\u0437\u043A\u043E\u043C \u0443\u0440\u043E\u0432\u043D\u0435 \u043C\u043E\u0434\u0435\u043B\u0435\u0439, \u0443\u043B\u0443\u0447\u0448\u0430\u044F \u0432 \u0446\u0435\u043B\u043E\u043C \u0434\u0438\u0437\u0430\u0439\u043D, \u043D\u043E \u0432\u044B \u043D\u0435 \u043C\u043E\u0436\u0435\u0442\u0435 \u0432\u0435\u0447\u043D\u043E \u0432\u044B\u0440\u0435\u0437\u0430\u0442\u044C \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u043D\u043E\u0432\u044B\u0445 \u044D\u043A\u0437\u0435\u043C\u043F\u043B\u044F\u0440\u043E\u0432 \u2014 \u0440\u0430\u043D\u043E \u0438\u043B\u0438 \u043F\u043E\u0437\u0434\u043D\u043E \u0432\u0430\u043C \u043D\u0430\u0434\u043E \u0441\u043A\u0430\u0437\u0430\u0442\u044C \u0447\u0442\u043E \u0436\u0435 \u0437\u0430 \u043A\u043B\u0430\u0441\u0441\u044B \u0432\u044B \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u0442\u0435. \u0418\u0442\u043E\u0433\u043E, \u0447\u0442\u043E \u043C\u043D\u0435 \u043D\u0435 \u043D\u0440\u0430\u0432\u0438\u0442\u0441\u044F"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u041A\u043E\u0433\u0434\u0430 \u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u0438\xa0",(0,s.jsx)(e.strong,{children:"\u0441\u043A\u043E\u043D\u0446\u0435\u043D\u0440\u0438\u0440\u043E\u0432\u0430\u043D\u044B"}),"\xa0\u0432\u044B\u0448\u0435 \u0432 \u043A\u043E\u0434\u0435 (\u0432 \u043A\u043E\u043D\u0442\u0440\u043E\u043B\u043B\u0435\u0440\u0430\u0445), \u0442\u043E \u0438\u043C\u0435\u043D\u043D\u043E \u0438\u0445 \u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0441\u044F \u0441\u043B\u043E\u0436\u043D\u043E - \u043E\u043D\u0438 \u043A\u0430\u043A \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044F \u0441\u0442\u0430\u043D\u043E\u0432\u044F\u0442\u0441\u044F. \u0425\u043E\u0442\u044F \u0432 \u0446\u0435\u043B\u043E\u043C \u044D\u0442\u043E \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u044B\u0439 \u043F\u043E\u0434\u0445\u043E\u0434"]}),"\n",(0,s.jsx)(e.li,{children:"\u042E\u043D\u0438\u0442 \u0442\u0435\u0441\u0442\u044B \u043D\u0430\u0441\u0442\u043E\u043B\u044C\u043A\u043E \u0434\u0438\u043A\u0442\u0443\u044E\u0442 \u0447\u0442\u043E \u0438 \u043A\u0430\u043A \u043C\u043D\u0435 \u043F\u0438\u0441\u0430\u0442\u044C, \u0447\u0442\u043E \u043D\u0430\u0447\u0438\u043D\u0430\u044E\u0449\u0438\u0439 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0441\u0442 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0434\u0430\u0436\u0435 \u043D\u0430\u0447\u0430\u0442\u044C \u043F\u0438\u0441\u0430\u0442\u044C \u0442\u0435\u0441\u0442\u044B \u0431\u0435\u0437 \u0437\u043D\u0430\u0447\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0433\u043E \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u043B\u043E\u0433\u0438\u043A\u0438"}),"\n",(0,s.jsx)(e.li,{children:"\u0420\u0430\u043D\u043E \u0438\u043B\u0438 \u043F\u043E\u0437\u0434\u043D\u043E, \u043D\u043E\u0432\u044B\u0439 instance \u0441\u043E\u0437\u0434\u0430\u0432\u0430\u0442\u044C \u043F\u0440\u0438\u0439\u0434\u0451\u0442\u0441\u044F, \u0430 \u0437\u043D\u0430\u0447\u0438\u0442 \u043D\u0430\u0434\u043E \u0441\u043E\u0437\u0434\u0430\u0432\u0430\u0442\u044C \u043C\u043E\u043A! \u0418 \u0432\u043E\u043F\u0440\u043E\u0441 \u043B\u0438\u0448\u044C \u0432 \u0442\u043E\u043C \u0433\u0434\u0435 \u044D\u0442\u043E \u0434\u0435\u043B\u0430\u0442\u044C \u0447\u0442\u043E-\u0431\u044B \u0442\u0435\u0441\u0442 \u0431\u044B\u043B \u043F\u0440\u043E\u0449\u0435, \u0430 \u043A\u043E\u0434 - \u043C\u0435\u043D\u0435\u0435 \u0445\u0440\u0443\u043F\u043A\u0438\u043C"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"\u043A\u043B\u0430\u0441\u0441-\u044D\u0442\u043E-\u043D\u0435-\u043E\u0431\u044C\u0435\u043A\u0442",children:"\u041A\u043B\u0430\u0441\u0441 \u044D\u0442\u043E \u043D\u0435 \u043E\u0431\u044C\u0435\u043A\u0442"}),"\n",(0,s.jsx)(e.p,{children:"\u041F\u0440\u043E\u0431\u043B\u0435\u043C\u0443 \u0441 new B \u043F\u0440\u043E\u0441\u0442\u043E \u0442\u0430\u043A \u043D\u0435 \u0440\u0435\u0448\u0438\u0442\u044C \u043D\u0435 \u0441\u0432\u044F\u0437\u044B\u0432\u0430\u044F \u043A\u043E\u0434 \u0441 \u0442\u0435\u0441\u0442\u043E\u043C. Phpunit \u043D\u0435 \u0433\u0435\u043D\u0435\u0440\u0438\u0440\u0443\u0435\u0442 \u043B\u043E\u0433\u0438\u043A\u0443 \u0432\u043D\u0443\u0442\u0440\u0438 \u0441\u0430\u043C\u043E\u0433\u043E \u043C\u043E\u043A-\u043A\u043B\u0430\u0441\u0441\u0430. \u0422.\u0435. \u0435\u0441\u043B\u0438 \u0432\u044B \u0441\u043E\u0437\u0434\u0430\u0434\u0438\u0442\u0435 \u043F\u0435\u0440\u0435\u0437\u0430\u043F\u0438\u0441\u044B\u0432\u0430\u044E\u0449\u0438\u0439 \u0432\u0435\u0441\u044C \u043A\u043B\u0430\u0441\u0441 \u043C\u043E\u043A.."}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-php",children:"$bMock = $this->getMockBuilder('B')\n->disableOriginalConstructor()\n->disableAutoload()\n->setMethods(['calc'])\n->getMock();\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u0422\u043E \u043E\u043D \u0432\u0435\u0440\u043D\u0451\u0442 \u043E\u0431\u044C\u0435\u043A\u0442.."}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-php",children:"class B_5dc6f9ad#2958 (2) {\n    private $__phpunit_invocationMocker => NULL\n    private $__phpunit_originalObject => NULL\n}\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u041D\u043E \u0435\u0441\u043B\u0438 \u0432\u044B \u044D\u0442\u043E\u0442 \u043E\u0431\u044C\u0435\u043A\u0442\xa0",(0,s.jsx)(e.strong,{children:"\u043D\u0438\u043A\u0430\u043A \u043D\u0435 \u0431\u0443\u0434\u0435\u0442\u0435 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C"}),", \u043E\u0441\u0442\u0430\u0432\u0438\u0432 new B \u0432 \u043A\u043E\u0434\u0435, \u0442\u043E \u0445\u043E\u0442\u044F \u043A\u043B\u0430\u0441\u0441 \u0432\u043E \u0432\u0440\u0435\u043C\u044F runtime \u043C\u043E\u043A\u043E\u043C \u0431\u044B\u043B \u0441\u0433\u0435\u043D\u0435\u0440\u0438\u0440\u043E\u0432\u0430\u043D, \u043E\u043D \u0431\u0443\u0434\u0435\u0442 \u043F\u0443\u0441\u0442.."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-php",children:"class B#2950 (0) {}\nFatal error: Call to undefined method B::calc()\n"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u041D\u0430\u0434\u043E \u043F\u043E\u0434\u043C\u0435\u043D\u044F\u0442\u044C"}),"\xa0\u0438\u043D\u0441\u0442\u0430\u043D\u0441 \u043D\u0430 \u043C\u043E\u043A \u043A\u0430\u043A-\u0442\u043E.. \u041D\u043E \u044F \u043D\u0435 \u0445\u043E\u0447\u0443 \u0438\u043D\u0436\u0435\u043A\u0442\u0438\u0442\u044C \u043C\u043E\u043A \u044F\u0432\u043D\u043E \u0432 \u043A\u043B\u0430\u0441\u0441 \u0438\u043B\u0438 \u043C\u0435\u0442\u043E\u0434, \u043F\u043E\u044D\u0442\u043E\u043C\u0443.."]}),"\n",(0,s.jsx)(e.h3,{id:"\u0440\u0435\u0448\u0435\u043D\u0438\u0435",children:"\u0420\u0435\u0448\u0435\u043D\u0438\u0435"}),"\n",(0,s.jsxs)(e.p,{children:["\u041F\u043E-\u043C\u043E\u0435\u043C\u0443 \u043F\u0440\u043E\u0449\u0435 \u0432\u0441\u0435\u0433\u043E\xa0",(0,s.jsx)(e.strong,{children:"new B"}),"\xa0\u0432\u044B\u043D\u0435\u0441\u0442\u0438 \u0432 \u043E\u0442\u0434\u0435\u043B\u044C\u043D\u044B\u0439 \u043C\u0435\u0442\u043E\u0434 \u0438 \u0437\u0430\u043C\u0435\u043D\u0438\u0442\u044C \u0435\u0433\u043E \u043F\u0440\u0438 \u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0438. \u0412 \u0436\u0438\u0437\u043D\u0438, \u044D\u0442\u043E \u043F\u043E\u0445\u043E\u0436\u0435 \u043D\u0430 \u0432\u044B\u043D\u0435\u0441\u0435\u043D\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u0438 \u0447\u0435\u0440\u0435\u0437 \u043A\u043E\u0448\u0435\u043B\u0451\u043A. \u0415\u0441\u043B\u0438 \u0434\u0435\u043D\u044C\u0433\u0438 \u0435\u0441\u0442\u044C - \u043E\u0441\u0442\u0430\u043B\u044C\u043D\u044B\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u0438 \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0430\u044E\u0442\u0441\u044F, \u0437\u0430\u0431\u044B\u043B \u0438\u043B\u0438 \u043F\u043E\u0442\u0435\u0440\u044F\u043B \u043A\u043E\u0448\u0435\u043B\u0451\u043A - \u043C\u043E\u043A\u0430\u0435\u043C \u0437\u0430\u043C\u0435\u043D\u0443 \u0432\u0438\u043D\u0430 \u043D\u0430 \u0432\u043E\u0434\u0443.\xa0"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-php",children:"class A{\n    function a($c){\n        $b = $this->getB();\n        return $c * $b->calc(2);\n    }\n    \n    protected function getB(){\n        return new B();\n    }\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u0422\u0435\u043F\u0435\u0440\u044C \u0432 \u0442\u0435\u0441\u0442\u0435 \u043C\u044B \u043C\u043E\u043A\u0430\u0435\u043C B, \u043E\u043F\u0438\u0441\u044B\u0432\u0430\u0435\u043C \u0447\u0442\u043E \u0434\u043E\u043B\u0436\u0435\u043D \u0432\u0435\u0440\u043D\u0443\u0442\u044C B->calc() \u0438 \u0434\u043B\u044F \u0432\u043D\u0435\u0434\u0440\u0435\u043D\u0438\u044F \u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u0438 \u043C\u043E\u043A\u0430\u0435\u043C getB():"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-php",children:"$bMock = $this->getMockBuilder('B')\n    ->disableAutoload()\n    ->setMethods(['calc'])\n    ->getMock();\n\n$bMock->method('calc')->willReturn(2);\n$o = $this->getMock('A',['getB']);\n$o->method('getB')->willReturn($bMock); //actual mock injection here\n/** @var \\B $o */ //for IDE to see method usage\n$this->assertEquals(4, $o->a(2));\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u041F\u0440\u0438 \u044D\u0442\u043E\u043C \u0441\u0430\u043C B \u043D\u0435 \u0432\u044B\u0437\u044B\u0432\u0430\u0435\u0442\u0441\u044F \u0438 \u043D\u0435 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u0442\u0441\u044F, \u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u044C \u0438\u0437 \u043A\u043B\u0430\u0441\u0441\u0430 \u043D\u0435 \u0432\u044B\u043D\u043E\u0441\u0438\u0442\u0441\u044F \u0438 \u043F\u0440\u0438 \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E\u0441\u0442\u0438, \u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u044C \u043C\u043E\u0436\u043D\u043E \u043B\u0435\u0433\u043A\u043E \u0437\u0430\u043C\u0435\u043D\u0438\u0442\u044C \u043D\u0430 \u0438\u043D\u043A\u0430\u043F\u0441\u0443\u043B\u044F\u0446\u0438\u044E \u0441 \u0441\u0435\u0442\u0442\u0435\u0440\u043E\u043C. \u041F\u0440\u043E\u0444\u0438\u0442."}),"\n",(0,s.jsx)(e.p,{children:"\u041D\u0435\u0434\u043E\u0441\u0442\u0430\u0442\u043A\u0438 \u2014 \u0442\u0435\u0441\u0442\u044B \u0441\u0442\u0430\u043D\u043E\u0432\u044F\u0442\u0441\u044F \u043D\u0430 \u0441\u0442\u0440\u043E\u0447\u043A\u0443 \u0441\u043B\u043E\u0436\u043D\u0435\u0439, \u0442.\u043A. \u043D\u0430\u0434\u043E \u0437\u0430\u043C\u0435\u043D\u044F\u0442\u044C \u043C\u0435\u0442\u043E\u0434\u044B \u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u0435\u0439, \u0432\u043C\u0435\u0441\u0442\u043E \u043F\u0435\u0440\u0435\u0434\u0430\u0447\u0438 \u0432 \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0430\u0440\u0433\u0443\u043C\u0435\u043D\u0442\u0430. \u0410 \u0438\u0437-\u0437\u0430 \u0442\u043E\u0433\u043E \u0447\u0442\u043E \u043A\u043E\u0434 \u0432\u044B\u0437\u044B\u0432\u0430\u0435\u0442\u0441\u044F \u0447\u0435\u0440\u0435\u0437 \u043C\u043E\u043A \u043E\u0431\u044C\u0435\u043A\u0442\u0430, \u0430 \u043D\u0435 \u0435\u0433\u043E instance, IDE \u043D\u0435 \u0441\u043C\u043E\u0436\u0435\u0442 \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u0440\u0435\u0444\u0430\u043A\u0442\u043E\u0440\u0438\u0442\u044C \u0438 \u043D\u0430\u0445\u043E\u0434\u0438\u0442\u044C \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u0435.. \u044D\u0442\u043E \u043A\u043E\u043D\u0435\u0447\u043D\u043E \u043D\u0435\u043F\u0440\u0438\u044F\u0442\u043D\u043E, \u043D\u043E \u0430\u043D\u043D\u043E\u0442\u0430\u0446\u0438\u0438 \u0441\u043F\u0430\u0441\u0430\u044E\u0442"}),"\n",(0,s.jsxs)(e.p,{children:["\u041E\u0441\u0442\u0430\u0451\u0442\u0441\u044F \u043F\u0440\u043E\u0431\u043B\u0435\u043C\u0430 \u0441\xa0",(0,s.jsx)(e.a,{href:"http://stackoverflow.com/questions/6711647/in-phpunit-how-do-i-mock-parent-methods",children:"parent-\u043C\u0435\u0442\u043E\u0434\u0430\u043C\u0438"})]})]})}function h(n={}){let{wrapper:e}={...(0,c.a)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}},93141:function(n,e,t){t.d(e,{Z:function(){return r}});let r=t.p+"assets/images/tes0001-e3523f5140ecd077fb17b4413278de7d.jpg"},22771:function(n,e,t){t.d(e,{Z:function(){return l},a:function(){return i}});var r=t(75271);let s={},c=r.createContext(s);function i(n){let e=r.useContext(c);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:i(n.components),r.createElement(c.Provider,{value:e},n.children)}},15102:function(n){n.exports=JSON.parse('{"permalink":"/blog/\u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435/\u0422\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0442\u043E\u0434\u0430 \u0433\u0434\u0435 \u0435\u0441\u0442\u044C new instance","editUrl":"https://github.com/tot-ra/kurapov.ee/tree/main/blog/\u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435/\u0422\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0442\u043E\u0434\u0430 \u0433\u0434\u0435 \u0435\u0441\u0442\u044C new instance.md","source":"@site/blog/\u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435/\u0422\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0442\u043E\u0434\u0430 \u0433\u0434\u0435 \u0435\u0441\u0442\u044C new instance.md","title":"\u0422\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0442\u043E\u0434\u0430 \u0433\u0434\u0435 \u0435\u0441\u0442\u044C new instance","description":"\u042F \u043A\u043E\u0433\u0434\u0430-\u0442\u043E \u043F\u0438\u0441\u0430\u043B \u043F\u0440\u043E \u0442\u043E \u0447\u0442\u043E \u0432 phpunit \u043D\u0435\u0431\u044B\u043B\u043E \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E\u0441\u0442\u0438 \u043D\u043E\u0440\u043C\u0430\u043B\u044C\u043D\u043E \u043F\u0440\u043E\u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0432\u043D\u0443\u0442\u0440\u0435\u043D\u043D\u0438\u0435 \u043C\u0435\u0442\u043E\u0434\u044B \u043A\u043B\u0430\u0441\u0441\u0430 \u0438 \u043F\u0440\u0438\u0445\u043E\u0434\u0438\u0442\u0441\u044F \u043E\u0431\u0440\u0430\u0449\u0430\u0442\u044C\u0441\u044F \u043A runkit. \u041D\u0435\u0437\u043D\u0430\u044E, \u0431\u044B\u043B\u0430 \u043B\u0438 \u044D\u0442\u043E \u043C\u043E\u044F \u043D\u0435\u0434\u043E\u0440\u0430\u0431\u043E\u0442\u043A\u0430, \u043B\u0438\u0431\u043E \u0441 \u0432\u0435\u0440\u0441\u0438\u0438 3.8 \u043F\u0440\u043E\u0448\u043B\u043E \u0443\u0436\u0435 \u043C\u043D\u043E\u0433\u043E \u0432\u0440\u0435\u043C\u0435\u043D\u0438, \u043D\u043E \u0432 4.5 \u044D\u0442\u0430 \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E\u0441\u0442\u044C \u0435\u0441\u0442\u044C!\xa0\u041C\u043E\u043A\u0438 \u0432 4.5\xa0\u0441\u0442\u0430\u043B\u0438 \u0443\u0434\u043E\u0431\u043D\u0435\u0439\xa0\u2014 \u043E\u043D\u0438 \u0443\u043C\u0435\u044E\u0442\xa0\u043F\u0435\u0440\u0435\u0437\u0430\u043F\u0438\u0441\u044B\u0432\u0430\u0442\u044C\xa0\u043A\u0430\u043A \u0432\u0435\u0441\u044C \u043A\u043B\u0430\u0441\u0441, \u0442\u0430\u043A \u0438\xa0\u0435\u0433\u043E \u0447\u0430\u0441\u0442\u0438.","date":"2015-04-08T10:00:00.000Z","tags":[{"inline":true,"label":"tests","permalink":"/blog/tags/tests"}],"readingTime":3.53,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"\u0422\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043C\u0435\u0442\u043E\u0434\u0430 \u0433\u0434\u0435 \u0435\u0441\u0442\u044C new instance","date":"2015-04-08T10:00","tags":["tests"]},"unlisted":false,"prevItem":{"title":"\u0422\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0444\u0430\u0439\u043B\u043E\u0432\u043E\u0439 \u0441\u0438\u0441\u0442\u0435\u043C\u044B \u0441 vfsStream","permalink":"/blog/\u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435/\u0422\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0444\u0430\u0439\u043B\u043E\u0432\u043E\u0439 \u0441\u0438\u0441\u0442\u0435\u043C\u044B \u0441 vfsStream"},"nextItem":{"title":"\u0421\u0432\u044F\u0437\u044B\u0432\u0430\u043D\u0438\u0435 \u0442\u0435\u0441\u0442\u043E\u0432 \u0447\u0435\u0440\u0435\u0437 @ticket \u0430\u043D\u043D\u043E\u0442\u0430\u0446\u0438\u0438 \u0441 Jira","permalink":"/blog/\u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435/\u0421\u0432\u044F\u0437\u044B\u0432\u0430\u043D\u0438\u0435 \u0442\u0435\u0441\u0442\u043E\u0432 \u0447\u0435\u0440\u0435\u0437 @ticket \u0430\u043D\u043D\u043E\u0442\u0430\u0446\u0438\u0438 \u0441 Jira"}}')}}]);