"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[71546],{70702:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>l,metadata:()=>t,toc:()=>o});var s=r(74848),i=r(28453);const l={},c=void 0,t={permalink:"/blog/tech/backend/\u041c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441\u044b",editUrl:"https://github.com/tot-ra/kurapov.ee/tree/main/blog/tech/backend/\u041c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441\u044b.md",source:"@site/blog/tech/backend/\u041c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441\u044b.md",title:"tech/backend/\u041c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441\u044b",description:"\u043f\u044f\u0442\u043d\u0438\u0446\u0430, 6 \u043c\u0430\u044f 2016 \u0433. \u0432 1439",date:"2024-10-22T20:50:17.721Z",tags:[],readingTime:6.84,hasTruncateMarker:!1,authors:[],frontMatter:{},unlisted:!1,prevItem:{title:"tech/backend/\u041c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441\u044b 2",permalink:"/blog/tech/backend/\u041c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441\u044b 2"},nextItem:{title:"tech/backend/\u0414\u0435\u0431\u0430\u0433 \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0449\u0435\u0433\u043e Magento",permalink:"/blog/tech/backend/\u0414\u0435\u0431\u0430\u0433 \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0449\u0435\u0433\u043e Magento"}},a={authorsImageUrls:[]},o=[{value:"\u041f\u0430\u0442\u0442\u0435\u0440\u043d\u044b \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f",id:"\u043f\u0430\u0442\u0442\u0435\u0440\u043d\u044b-\u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f",level:3},{value:"\u041f\u0440\u0438\u043c\u0435\u0440",id:"\u043f\u0440\u0438\u043c\u0435\u0440",level:3},{value:"\u0412\u0435\u0431-\u0441\u0435\u0440\u0432\u0438\u0441 \u043d\u0430 PHP",id:"\u0432\u0435\u0431-\u0441\u0435\u0440\u0432\u0438\u0441-\u043d\u0430-php",level:3},{value:"\u0414\u0435\u043c\u043e\u043d-\u0440\u0430\u0431\u043e\u0442\u043d\u0438\u043a \u043d\u0430 PHP",id:"\u0434\u0435\u043c\u043e\u043d-\u0440\u0430\u0431\u043e\u0442\u043d\u0438\u043a-\u043d\u0430-php",level:3},{value:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430\u043c\u0438",id:"\u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435-\u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430\u043c\u0438",level:2},{value:"Bash",id:"bash",level:3},{value:"PM2",id:"pm2",level:3},{value:"\u041e\u0447\u0435\u0440\u0435\u0434\u0438 \u0438 RabbitMQ",id:"\u043e\u0447\u0435\u0440\u0435\u0434\u0438-\u0438-rabbitmq",level:3},{value:"\u041f\u0435\u0440\u0441\u043f\u0435\u043a\u0442\u0438\u0432\u044b",id:"\u043f\u0435\u0440\u0441\u043f\u0435\u043a\u0442\u0438\u0432\u044b",level:3}];function h(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"\u043f\u044f\u0442\u043d\u0438\u0446\u0430, 6 \u043c\u0430\u044f 2016 \u0433. \u0432 14:40:39"}),"\n",(0,s.jsxs)(n.p,{children:["\u041c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441\u044b \u0432 \u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u0432\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u044d\u0442\u043e\xa0",(0,s.jsx)(n.a,{href:"https://habrahabr.ru/post/249183/",children:"\u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u043d\u044b\u0439 \u043f\u043e\u0434\u0445\u043e\u0434"}),"\xa0\u043f\u043e \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u044e \u0438\u0437\u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043c\u043e\u043d\u043e\u043b\u0438\u0442\u043d\u043e\u0433\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043d\u0430 \u043d\u0435\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u044b\u0435 \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u044b\u0435 (linux) \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u044b. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u044c \u0432 \u0442\u0430\u043a\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0438 \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u0435\u0442 \u043a\u043e\u0433\u0434\u0430 \u043c\u043e\u043d\u043e\u043b\u0438\u0442 \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0441\u044f\xa0",(0,s.jsx)(n.strong,{children:"\u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u0435\u0434\u043b\u0435\u043d\u043d\u044b\u043c"}),"\xa0\u0434\u043b\u044f \u043e\u0434\u043d\u043e\u0433\u043e \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430, \u043a\u043e\u0433\u0434\u0430 \u043a\u043e\u0434 \u0442\u044f\u043d\u0435\u0442\xa0",(0,s.jsx)(n.strong,{children:"\u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439"}),"\xa0\u0438 \u043a\u043e\u0433\u0434\u0430\xa0",(0,s.jsx)(n.strong,{children:"\u043f\u043e\u0432\u044b\u0448\u0430\u0435\u0442\u0441\u044f \u0440\u0438\u0441\u043a"}),"\xa0\u0447\u0442\u043e-\u0442\u043e \u0441\u043b\u043e\u043c\u0430\u0442\u044c \u0432 \u044d\u0442\u043e\u0439 \u0434\u043b\u0438\u043d\u043d\u043e\u0439 \u0446\u0435\u043f\u043e\u0447\u043a\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445."]}),"\n",(0,s.jsxs)(n.p,{children:["\u041c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441\u044b \u2014 \u043d\u0435 \u043f\u0430\u043d\u0430\u0446\u0435\u044f \u0438 \u0442\u043e\u0436\u0435 \u0443\u0441\u043b\u043e\u0436\u043d\u044f\u044e\u0442 \u0432\u0441\u0451 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0432 \u043f\u043b\u0430\u043d\u0435 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438, \u043b\u043e\u0433\u043e\u0432, \u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043e\u0448\u0438\u0431\u043e\u043a, \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0439, \u0432\u0435\u0440\u0441\u0438\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f, \u0434\u0435\u043f\u043b\u043e\u044f, \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u0435\u0442 \u0434\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 bootstrap-\u043a\u043e\u0434\u0430 \u0438\u0437-\u0437\u0430 \u0438\u0437\u043e\u043b\u044f\u0446\u0438\u0438 \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u0432. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0441\u0442\u043e\u0438\u0442 \u043e\u0441\u0442\u043e\u0440\u043e\u0436\u043d\u043e \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442\u044c \u043a \u0442\u043e\u043c\u0443, \u0447\u0442\u043e \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u044b\u0434\u0435\u043b\u0438\u0442\u044c \u0432 \u043c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441 \u0438 \u0447\u0442\u043e \u043e\u043d \u0434\u0430\u0441\u0442 \u043f\u043e\xa0",(0,s.jsx)(n.strong,{children:"\u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0430\u043c"}),"\xa0\u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f (performance, \u0441\u0442\u0430\u0431\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c, \u043c\u0430\u0441\u0448\u0442\u0430\u0431\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435, \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438). \u041a\u0430\u043a \u043f\u0440\u0430\u0432\u0438\u043b\u043e, \u0432\u0435\u0431-\u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0441\u043e\u0437\u0434\u0430\u044e\u0442\u0441\u044f\xa0",(0,s.jsx)(n.a,{href:"https://martinfowler.com/bliki/MonolithFirst.html",children:"\u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043c\u043e\u043d\u043e\u043b\u0438\u0442\u043e\u043c"}),", \u0430 \u043f\u043e\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u044f\u044e\u0442\u0441\u044f \u043d\u0430 \u0441\u0435\u0440\u0432\u0438\u0441\u044b \u2014 \u0442\u0430\u043a \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u0435\u0439 \u0438 \u043f\u0440\u043e\u0449\u0435 \u044d\u0432\u043e\u043b\u044e\u0446\u0438\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c."]}),"\n",(0,s.jsx)("iframe",{width:"934",height:"350",src:"https://www.youtube.com/embed/2yko4TbC8cI",title:"Martin Fowler  \u2013  Microservices",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:!0}),"\n",(0,s.jsx)(n.h3,{id:"\u043f\u0430\u0442\u0442\u0435\u0440\u043d\u044b-\u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f",children:"\u041f\u0430\u0442\u0442\u0435\u0440\u043d\u044b \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f"}),"\n",(0,s.jsx)(n.p,{children:"\u041e\u0431\u0449\u0435\u043d\u0438\u0435 \u043c\u0435\u0436\u0434\u0443 \u0441\u0435\u0440\u0432\u0438\u0441\u0430\u043c\u0438 \u043c\u043e\u0436\u043d\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u043f\u043e-\u0440\u0430\u0437\u043d\u043e\u043c\u0443:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["\u0421\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e \u2014 \u0441\u0435\u0440\u0432\u0438\u0441 \u0432\u044b\u0437\u044b\u0432\u0430\u044e\u0442 \u044f\u0432\u043d\u043e \u043a\u0430\u043a \u0432\u0435\u0431-\u0441\u0435\u0440\u0432\u0438\u0441 \u043f\u043e HTTP/REST, \u0434\u0435\u043b\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0443\xa0",(0,s.jsx)(n.strong,{children:"\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e"}),"\xa0\u043f\u043e-\u0441\u0442\u0430\u0440\u0438\u043d\u043a\u0435, \u043f\u043e\u0434\u043e\u0431\u043d\u043e \u0432\u0435\u0431-\u0441\u0435\u0440\u0432\u0435\u0440\u0443, \u0442\u043e\u0433\u0434\u0430 \u043a\u0430\u043a \u043a\u043b\u0438\u0435\u043d\u0442 \u0436\u0434\u0451\u0442 \u043e\u0442\u0432\u0435\u0442\u0430 (\u043f\u043e\u0434\u043e\u0431\u043d\u043e ajax)"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u0410\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e \u2014 c\u0435\u0440\u0432\u0438\u0441 \u0432\u044b\u0437\u044b\u0432\u0430\u044e\u0442 \u044f\u0432\u043d\u043e \u043f\u043e HTTP/REST, \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0437\u0430\u0434\u0430\u0447\u0430 \u0438 \u043a\u043b\u0438\u0435\u043d\u0442 \u0442\u0443\u0442 \u0436\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 job ID. \u041a\u043b\u0438\u0435\u043d\u0442 \u043e\u0431\u044f\u0437\u0430\u043d \u0441\u0430\u043c \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438, \u043f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u0435\u0441\u043a\u0438 \u0441\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u044f \u0443 \u0441\u0435\u0440\u0432\u0438\u0441\u0430 (polling, aws transcoder)"}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u0410\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e \u2014 \u0441\u0435\u0440\u0432\u0438\u0441 \u043a\u0430\u043a \u0440\u0430\u0431\u043e\u0442\u043d\u0438\u043a (\u0434\u0435\u043c\u043e\u043d) \u0431\u0435\u0437 \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u043e\u0433\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u0430. \u0421\u043b\u0443\u0448\u0430\u0435\u0442 \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u0440\u0435\u0441\u0443\u0440\u0441 \u0438 \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u0442 \u043d\u043e\u0432\u044b\u0435 \u0432\u044b\u0437\u043e\u0432\u044b. \u042d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u0435\u0434\u0438\u043d\u0430\u044f \u0448\u0438\u043d\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 (",(0,s.jsx)(n.a,{href:"https://www.rabbitmq.com/",children:"RabbitMQ"}),",",(0,s.jsx)(n.a,{href:"http://gearman.org/",children:"Gearman"}),",\xa0",(0,s.jsx)(n.a,{href:"http://zeromq.org/",children:"0MQ"}),", Kafka, AWS SQS, AWS Kinesis)>"]}),"\n",(0,s.jsx)(n.li,{children:"\u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 \u0441 \u043b\u043e\u043a\u0430\u043c\u0438 (\u0444\u0430\u0439\u043b\u044b, \u043f\u0430\u043c\u044f\u0442\u044c, Memcache, Redis)"}),"\n",(0,s.jsx)(n.li,{children:"\u0434\u0440\u0443\u0433\u0438\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u044b (\u043f\u0440\u043e\u0446\u0435\u0441\u0441\u044b, \u0441\u0435\u0442\u044c, \u0436\u0435\u043b\u0435\u0437\u043e)"}),"\n"]}),"\n",(0,s.jsxs)(n.ol,{start:"4",children:["\n",(0,s.jsx)(n.li,{children:"\u0410\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e, \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f MQ, \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0435\u0442 \u0441\u043b\u0443\u0448\u0430\u0442\u0435\u043b\u0435\u0439 \u0432 \u0441\u0435\u0431\u0435 \u0438 \u0441\u0430\u043c \u0437\u043d\u0430\u0435\u0442 \u043a \u043a\u043e\u043c\u0443 \u043a\u0443\u0434\u0430 \u0441\u0442\u0443\u0447\u0430\u0442\u044c"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u0413\u043b\u0430\u0432\u043d\u043e\u0435 \u0447\u0442\u043e-\u0431\u044b \u043f\u043e\u0434\u0445\u043e\u0434 \u0431\u044b\u043b \u0435\u0434\u0438\u043d\u044b\u0439, \u0441 \u043f\u0440\u0435\u0434\u0441\u043a\u0430\u0437\u0443\u0435\u043c\u044b\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u043e\u043c \u0434\u0430\u043d\u043d\u044b\u0445 (",(0,s.jsx)(n.a,{href:"http://json.org/",children:"JSON"}),",\xa0",(0,s.jsx)(n.a,{href:"https://github.com/google/protobuf",children:"protobuf"}),",\xa0",(0,s.jsx)(n.a,{href:"http://thrift.apache.org/",children:"thrift"}),",\xa0",(0,s.jsx)(n.a,{href:"http://msgpack.org/",children:"messagepack"}),").\u0414\u043b\u044f \u0443\u0434\u043e\u0431\u043d\u043e\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0438 \u0434\u0440\u0443\u0436\u0431\u044b \u043c\u0435\u0436\u0434\u0443 \u0441\u0435\u0440\u0432\u0438\u0441\u0430\u043c\u0438, \u043d\u0430\u0434\u043e \u0441\u0442\u0430\u0432\u0438\u0442\u044c\xa0",(0,s.jsx)(n.a,{href:"https://www.consul.io/",children:"Consul"}),",\xa0",(0,s.jsx)(n.a,{href:"https://github.com/coreos/etcd",children:"ETCD"}),"\xa0\u0438\u043b\u0438\xa0",(0,s.jsx)(n.a,{href:"https://zookeeper.apache.org/",children:"ZooKeeper"}),"\xa0\u2014 \u043e\u043d\u0438 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0442 \u0430\u0431\u0441\u0442\u0440\u0430\u0433\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043e\u0442 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0445 IP \u0430\u0434\u0440\u0435\u0441\u043e\u0432 \u0438 PID \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0432."]}),"\n",(0,s.jsx)(n.h3,{id:"\u043f\u0440\u0438\u043c\u0435\u0440",children:"\u041f\u0440\u0438\u043c\u0435\u0440"}),"\n",(0,s.jsxs)(n.p,{children:["\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0438\u043c\u0435\u0435\u0442 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c\xa0",(0,s.jsx)(n.strong,{children:"\u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u0444\u0430\u0439\u043b\u044b"}),".\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0444\u0430\u0439\u043b\u0430 \u043e\u0447\u0435\u043d\u044c \u0442\u044f\u0436\u0451\u043b\u0430\u044f \u043f\u043e CPU, \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u0438 \u0437\u0430\u043d\u0438\u043c\u0430\u0435\u0442 \u043c\u043d\u043e\u0433\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438\u0437-\u0437\u0430 \u0434\u043e\u043b\u0433\u0438\u0445 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0445 \u0441\u0435\u0442\u0435\u0432\u044b\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u043f\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0433\u043e\u0442\u043e\u0432\u044b\u0445 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432 \u0432 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435. \u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c \u044d\u0442\u0430 \u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u0430\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f upload+resize+store \u0437\u0430\u043d\u0438\u043c\u0430\u0435\u0442 20 \u0441\u0435\u043a\u0443\u043d\u0434 \u0432 \u043c\u043e\u043d\u043e\u043b\u0438\u0442\u043d\u043e\u043c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438. \u0412 \u043c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441\u043d\u043e\u043c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438, \u0432\u044b \u0440\u0435\u0448\u0430\u0435\u0442\u0435 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0435\u0440\u0432\u0438\u0441\xa0",(0,s.jsx)(n.strong,{children:"\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438"}),"\xa0\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438, \u0430 \u0434\u043b\u044f \u043e\u0447\u0435\u0440\u0435\u0434\u0435\u0439 \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u0441\u043e\u0437\u0434\u0430\u0451\u0442\u0435 \u0442\u0430\u0431\u043b\u0438\u0447\u043a\u0443 \u0432 \u0411\u0414. \u041e\u0442\u043b\u0438\u0447\u043d\u043e, \u044d\u0442\u043e \u0434\u0430\u0451\u0442 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0441\u0435\u0440\u0432\u0438\u0441 \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u044c \u043d\u0430 \u0434\u0440\u0443\u0433\u0443\u044e \u043c\u0430\u0448\u0438\u043d\u0443 \u0438 \u043d\u0435 \u043d\u0430\u0433\u0440\u0443\u0436\u0430\u0442\u044c \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0441\u0430\u0439\u0442. \u0422\u0435\u043f\u0435\u0440\u044c \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u044e\u0442 \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b \u2014 \u043a\u0430\u043a \u044d\u0442\u043e \u0432\u0441\u0451 \u0441\u0434\u0435\u043b\u0430\u0442\u044c? \u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438, \u0435\u0441\u043b\u0438 \u0440\u0430\u043d\u044c\u0448\u0435 \u0432 \u043c\u043e\u043d\u043e\u043b\u0438\u0442\u0435 \u0440\u0430\u0437\u043d\u044b\u0435 \u0441\u043b\u043e\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u043b\u0438 \u0432\u0441\u0451 \u0437\u0430 \u0432\u0430\u0441, \u0442\u043e \u0442\u0435\u043f\u0435\u0440\u044c \u0447\u0443\u0442\u044c \u043b\u0438 \u043d\u0435 \u0432\u0441\u0435 \u0437\u043d\u0430\u0447\u0438\u043c\u044b\u0435 \u043a\u043b\u0430\u0441\u0441\u044b \u043d\u0430\u0434\u043e \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0434\u0435\u043b\u044f\u0442\u044c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0435 \u0441\u0435\u0440\u0432\u0438\u0441\u044b \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044e, \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435, \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a, \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439 \u0438 \u0441\u0430\u043c \u0440\u0435\u0441\u0430\u0439\u0437 \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a."]}),"\n",(0,s.jsx)(n.h3,{id:"\u0432\u0435\u0431-\u0441\u0435\u0440\u0432\u0438\u0441-\u043d\u0430-php",children:"\u0412\u0435\u0431-\u0441\u0435\u0440\u0432\u0438\u0441 \u043d\u0430 PHP"}),"\n",(0,s.jsxs)(n.p,{children:["\u0415\u0441\u043b\u0438 \u0432\u0430\u0448 \u0441\u0435\u0440\u0432\u0438\u0441 \u0434\u043e\u043b\u0436\u0435\u043d \u0438\u043c\u0435\u0442\u044c \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u0432\u0435\u0431-\u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441, \u043f\u0440\u043e\u0449\u0435 \u0432\u0441\u0435\u0433\u043e \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c php \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043f\u043e\u0434 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0443\u044e \u043f\u0430\u043f\u043a\u0443 \u0438 \u043e\u043d\u0430 \u0431\u0443\u0434\u0435\u0442 \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u0434\u0451\u0440\u0433\u0430\u0442\u044c\u0441\u044f. \u0422\u0443\u0442 \u043f\u0440\u0438\u0433\u043e\u0434\u044f\u0442\u0441\u044f \u043c\u0438\u043a\u0440\u043e-\u0444\u0440\u0435\u0439\u043c\u0432\u043e\u0440\u043a\u0438 \u0442\u0438\u043f\u0430\xa0",(0,s.jsx)(n.a,{href:"http://silex.sensiolabs.org/",children:"Silex"}),",\xa0",(0,s.jsx)(n.a,{href:"https://www.slimframework.com/",children:"Slim"}),"\xa0\u0438\u043b\u0438\xa0",(0,s.jsx)(n.a,{href:"https://lumen.laravel.com/",children:"Lumen"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"#run me as:\n#php -S 0.0.0.0:80 -t /var/www/silex\n\n#install me with:\n#composer require silex/silex:~1.3\n\n$loader = require __DIR__.'/vendor/autoload.php';\n\n$app = new Silex\\Application();\n\n#\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430\n$app->post('/resizeImage', function(Request $request) use($app) {\n    #\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c imagemagick, \u0441\u0434\u0435\u043b\u0430\u0442\u044c resize, \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c\n    \n    return \"{success:true}\";\n});\n\n#\u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430\n$app->post('/resizeImageAsync', function(Request $request) use($app) {\n    #\u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0440\u0430\u0431\u043e\u0442\u0443 \u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u0435\u0451 \u0434\u0435\u043c\u043e\u043d\u0443 \u0447\u0435\u0440\u0435\u0437 RabbitMQ, \u0441\u043c. \u043d\u0438\u0436\u0435\n    #\u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043e\u043f\u043e\u0432\u0435\u0441\u0442\u0438\u043c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u043e\u043c \u0447\u0435\u0440\u0435\u0437 websocket\u044b\n    \n    return \"{success:true}\";\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u0434\u0435\u043c\u043e\u043d-\u0440\u0430\u0431\u043e\u0442\u043d\u0438\u043a-\u043d\u0430-php",children:"\u0414\u0435\u043c\u043e\u043d-\u0440\u0430\u0431\u043e\u0442\u043d\u0438\u043a \u043d\u0430 PHP"}),"\n",(0,s.jsx)(n.p,{children:"\u0425\u043e\u0442\u044f php \u0438\u0437\u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e \u0440\u0430\u0437\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043b\u0441\u044f \u043a\u0430\u043a \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0430\u0442\u043e\u0440 html \u0444\u0430\u0439\u043b\u043e\u0432, \u0441\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0439 php \u043c\u043e\u0436\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0432 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435 \u043a\u0430\u043a \u0441\u0435\u0440\u0432\u0438\u0441 \u0435\u0441\u043b\u0438 \u0435\u0433\u043e \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0432 CLI \u0440\u0435\u0436\u0438\u043c\u0435. \u0412 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0439 \u0436\u0438\u0437\u043d\u0438, php \u0434\u0435\u043c\u043e\u043d\u044b \u043a\u0430\u043a \u043f\u0440\u0430\u0432\u0438\u043b\u043e \u043d\u0435\u0441\u0442\u0430\u0431\u0438\u043b\u044c\u043d\u044b \u0438\u0437-\u0437\u0430 \u0443\u0442\u0435\u0447\u0435\u043a \u043f\u0430\u043c\u044f\u0442\u0438 \u0438 \u043d\u0435 \u0442\u0430\u043a \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u044b \u043f\u043e \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438 \u043a\u0430\u043a \u0441\u0435\u0440\u0432\u0438\u0441\u044b \u043d\u0430 nodejs \u0438\u043b\u0438 go. \u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0434\u0435\u043c\u043e\u043d \u043c\u043e\u0436\u043d\u043e \u0438\u0437 \u043a\u043e\u043c\u043c\u0430\u043d\u0434\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438.."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"php -f /var/www/app/daemon/myImageProcessor.php\n\n#let it live after terminal exit:\nnohup php -f myImageProcessor.php &\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u0421 \u0434\u0435\u043c\u043e\u043d\u0430\u043c\u0438 \u0435\u0441\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0435\u0439"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u0420\u0430\u0431\u043e\u0442\u0430\u044f \u0432 \u0431\u0435\u0441\u043a\u043e\u043d\u0435\u0447\u043d\u043e\u043c \u0446\u0438\u043a\u043b\u0435 \u043d\u0430\u0434\u043e \u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0440\u0435\u0441\u0443\u0440\u0441\u044b (DB-\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f, file handles)"}),"\n",(0,s.jsx)(n.li,{children:"\u041d\u0430\u0434\u043e \u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u0442\u044c \u0440\u043e\u0441\u0442 \u0441\u0432\u043e\u0435\u0439 \u043f\u0430\u043c\u044f\u0442\u0438 \u0447\u0442\u043e-\u0431\u044b \u043d\u0435 \u0443\u043c\u0435\u0440\u0435\u0442\u044c \u043e\u0442 fatal error"}),"\n",(0,s.jsx)(n.li,{children:"\u041d\u0430\u0434\u043e \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c graceful stop \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 SIGTERM \u0438 \u043f\u0440\u043e\u0447\u0438\u0445 \u0441\u0438\u0433\u043d\u0430\u043b\u043e\u0432 \u0447\u0442\u043e-\u0431\u044b \u043d\u0435 \u043f\u043e\u0432\u0440\u0435\u0434\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043d\u0430 \u0441\u043b\u0443\u0447\u0430\u0439 \u0435\u0441\u043b\u0438 \u043a\u0442\u043e-\u0442\u043e \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442 \u0434\u0435\u043c\u043e\u043d\u0430 \u0438\u0437 \u043a\u043e\u043d\u0441\u043e\u043b\u0438 \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442 \u0441\u0435\u0440\u0432\u0438\u0441"}),"\n",(0,s.jsx)(n.li,{children:"\u041d\u0430\u0434\u043e \u043b\u043e\u0432\u0438\u0442\u044c \u0432\u0441\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f, \u0434\u0435\u043b\u0430\u0442\u044c \u0430\u043b\u044c\u0442\u0435\u0440\u043d\u0430\u0442\u0438\u0432\u043d\u0443\u044e \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0431\u044d\u043a\u0430\u043f\u043e\u0432 \u0438 \u043e\u0442\u043a\u0430\u0442\u043e\u0432, \u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0440\u0430\u0441\u0438\u0432\u044b\u0439 log"}),"\n",(0,s.jsx)(n.li,{children:"\u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u0434\u0435\u043c\u043e\u043d\u044b \u0437\u0430\u043d\u043e\u0432\u043e \u2014 \u0447\u0435\u0440\u0435\u0437 \u043a\u0440\u043e\u043d \u0438\u043b\u0438 \u0447\u0435\u0440\u0435\u0437 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044e \u0434\u0435\u043c\u043e\u043d\u0430 \u0432 \u0432\u0438\u0434\u0435 \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u0433\u043e \u0441\u0435\u0440\u0432\u0438\u0441\u0430"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u0423 \u0432\u0430\u0441 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u043e\u0432 (instance) \u043e\u0434\u043d\u043e\u0433\u043e \u0438 \u0442\u043e\u0433\u043e \u0436\u0435 \u0434\u0435\u043c\u043e\u043d\u0430 \u0432 \u0432\u0438\u0434\u0435 \u0440\u0430\u0437\u043d\u044b\u0445 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0432. \u0422\u043e\u0433\u0434\u0430 \u043e\u0447\u0435\u043d\u044c \u0432\u0430\u0436\u043d\u043e \u043d\u0435 \u043f\u043e\u043f\u0430\u0441\u0442\u044c \u0432 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u043c\u043d\u043e\u0433\u043e\u043f\u043e\u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438 \u2014 \u0434\u0435\u0434\u043b\u043e\u043a\u0438 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0439, \u0437\u0430\u043f\u0438\u0441\u044c \u0432 \u043e\u0434\u0438\u043d log \u0444\u0430\u0439\u043b \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u043e \u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0434\u043d\u043e\u0433\u043e \u0438 \u0442\u043e\u0433\u043e \u0436\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u044f. \u041e\u0431\u043e \u0432\u0441\u0451\u043c \u044d\u0442\u043e\u043c \u0447\u0443\u0442\u044c \u043f\u043e\u0437\u0436\u0435.."}),"\n",(0,s.jsx)(n.p,{children:"\u0410 \u043f\u043e\u043a\u0430, \u0432\u043e\u0442 \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u043f\u0440\u0438\u043c\u0435\u0440 \u0441 \u0431\u0435\u0441\u043a\u043e\u043d\u0435\u0447\u043d\u044b\u043c \u0446\u0438\u043a\u043b\u043e\u043c \u0438 \u043f\u0441\u0435\u0432\u0434\u043e-\u043a\u043e\u0434\u043e\u043c:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'//myImageProcessor.php\n//set custom process name\ncli_set_process_title(\'php - daemon - myImageProcessor.php\');\n\n//enable process interruption handling\ndeclare(ticks = 1);\n$interrupted = false;\nfunction handleSignal(){\n    $interrupted = true;\n}\n\npcntl_signal(SIGTERM, "handleSignal");\npcntl_signal(SIGHUP, "handleSignal");\npcntl_signal(SIGUSR1, "handleSignal");\npcntl_signal(SIGINT, "handleSignal");\n\nwhile(true){\n    $db->connect();\n    \n    $db->query("SELECT * FROM images WHERE processed = 0");\n    \n    //do some work here with resize & upload\n    \n    $db->disconnect();\n    \n    //memory cleanup & check\n    gc_collect_cycles();\n    const MAX_MEMORY_EXTRA = 10 * 1024 * 1024;\n    if (convertToBytes(ini_get(\'memory_limit\')) < (memory_get_usage(true) + MAX_MEMORY_EXTRA)) {\n        exit();\n    }\n    \n    //graceful shutdown\n    if($interrupted){\n        exit();\n    }\n    \n    //wait for some time to decrease load on DB above\n    sleep(10);\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435-\u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430\u043c\u0438",children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430\u043c\u0438"}),"\n",(0,s.jsx)(n.p,{children:"\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0443 \u043d\u0430 \u0423\u0416\u0415 \u0437\u0430\u043f\u0443\u0449\u0435\u043d\u043d\u043e\u0433\u043e \u0434\u0435\u043c\u043e\u043d\u0430 \u043c\u043e\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043a\u0430\u043a \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 bash, \u0442\u0430\u043a \u0438 \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u0441\u0430\u043c\u043e\u0433\u043e php \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u044d\u043a\u0437\u043e\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0444\u043b\u0430\u0433\u043e\u0432 \u0432 \u0431\u0430\u0437\u0435, \u0444\u043b\u0430\u0433\u043e\u0432 \u0432\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0444\u0430\u0439\u043b\u0430\u0445 \u0438\u043b\u0438 \u0436\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u0442\u0430\u043a\u043e\u0439 \u0436\u0435 \u0434\u043e\u0441\u0442\u0443\u043f \u043a shell. \u0421 \u0442\u0430\u043a\u043e\u0439 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u043e\u0439, \u043a\u043e\u043c\u043c\u0430\u043d\u0434\u0443 \u043c\u043e\u0436\u043d\u043e \u0441\u043c\u0435\u043b\u043e \u043a\u043b\u0430\u0441\u0442\u044c \u0432 cron \u0438 \u0434\u0435\u043c\u043e\u043d \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u043e\u043c (\u0440\u0430\u0437 \u0432 \u043c\u0438\u043d\u0443\u0442\u0443)"}),"\n",(0,s.jsx)(n.h3,{id:"bash",children:"Bash"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'#check if daemon is not running yet\n#add logs\n[ "$(ps -ef| grep -v grep | grep myImageProcessor|wc -l)" -eq 0 ] && php -f myImageProcessor.php > /var/www/logs/myImageProcessor.log\n\n#up to 5 instances!\n[ "$(ps -ef| grep -v grep | grep imageResizer|wc -l)" -lt 5 ] && php myImageProcessor.php > /var/logs/myImageProcessor.log\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u041e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0435\u043c\u043e\u043d\u0430 \u043c\u043e\u0436\u043d\u043e \u0442\u0430\u043a \u0436\u0435 \u0438\u0437 \u0448\u0435\u043b\u043b\u0430.."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"sudo /usr/bin/kill -9 `ps aux | grep 'myImageProcessor' | grep -v grep | awk '{print $2}'`\n"})}),"\n",(0,s.jsx)(n.h3,{id:"pm2",children:"PM2"}),"\n",(0,s.jsxs)(n.p,{children:["\u0414\u043b\u044f \u0431\u043e\u043b\u0435\u0435 \u043c\u043e\u0433\u0443\u0447\u0435\u0433\u043e nodejs, \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u043e\u0442\u043b\u0438\u0447\u043d\u044b\u0439 process manager, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u0435\u0442 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0438 php-\u0434\u0435\u043c\u043e\u043d\u0430\u043c\u0438! \u0421 \u0435\u0433\u043e \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043c\u043e\u0436\u043d\u043e \u0441\u0440\u0430\u0437\u0443 \u0432\u0438\u0434\u0435\u0442\u044c\xa0",(0,s.jsx)(n.strong,{children:"\u0442\u043e\u043b\u044c\u043a\u043e"}),"\xa0\u043f\u0440\u043e\u0446\u0435\u0441\u0441\u044b \u0434\u0435\u043c\u043e\u043d\u043e\u0432. \u041a\u0440\u043e\u043c\u0435 \u0442\u043e\u0433\u043e:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u0434\u0435\u043c\u043e\u043d\u0430 \u0441\u0440\u0430\u0437\u0443 \u043f\u043e\u0441\u043b\u0435 \u0435\u0433\u043e \u043f\u0430\u0434\u0435\u043d\u0438\u044f"}),"\n",(0,s.jsx)(n.li,{children:"\u0441\u043b\u0435\u0434\u0438\u0442\u044c \u0437\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f\u043c\u0438 \u0444\u0430\u0439\u043b\u0430 \u0447\u0442\u043e-\u0431\u044b \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0434\u0435\u043c\u043e\u043d (watch)"}),"\n",(0,s.jsx)(n.li,{children:"\u0441\u043b\u0435\u0434\u0438\u0442\u044c \u0437\u0430 \u043f\u0430\u043c\u044f\u0442\u044c\u044e \u0438 CPU \u0438 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u043f\u0440\u0438 \u0438\u0445 \u043f\u0440\u0435\u0432\u044b\u0448\u0435\u043d\u0438\u044f\u0445"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u044b \u043f\u043e\u043f\u0440\u043e\u0449\u0435 \u2014\xa0",(0,s.jsx)(n.a,{href:"https://github.com/foreverjs/forever",children:"forever"}),"\xa0\u0438\xa0",(0,s.jsx)(n.a,{href:"https://github.com/tableflip/guvnor",children:"guvnor"})]}),"\n",(0,s.jsx)(n.h3,{id:"\u043e\u0447\u0435\u0440\u0435\u0434\u0438-\u0438-rabbitmq",children:"\u041e\u0447\u0435\u0440\u0435\u0434\u0438 \u0438 RabbitMQ"}),"\n",(0,s.jsx)(n.p,{children:"\u041a\u0430\u043a \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u044b \u043d\u0430\u0447\u0430\u043b\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u0435\u043c\u043e\u043d\u043e\u0432, \u0432\u0435\u0440\u043e\u044f\u0442\u043d\u0435\u0439 \u0432\u0441\u0435\u0433\u043e \u0432\u044b \u0441\u0442\u0430\u043d\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0438 \u043f\u0430\u0442\u0442\u0435\u0440\u043d Command, \u043f\u043e \u043a\u043e\u0442\u043e\u0440\u043e\u043c\u0443 \u043c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441\u044b \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442 \u0440\u043e\u043b\u044c \u0440\u0430\u0431\u043e\u0442\u043d\u0438\u043a\u043e\u0432 (workers). MQ-\u0441\u0435\u0440\u0432\u0435\u0440 \u0432\u044b\u0441\u0442\u0443\u043f\u0430\u0435\u0442 \u0432 \u0440\u043e\u043b\u0438 \u0431\u0440\u043e\u043a\u0435\u0440\u0430 \u0438 \u0448\u0438\u043d\u044b, \u0441\u0432\u044f\u0437\u044b\u0432\u0430\u044e\u0449\u0435\u0439 \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0435 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u044b \u0432\u043e\u0435\u0434\u0438\u043d\u043e. \u041e\u043d \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442 \u0437\u0430 \u043d\u0430\u0434\u0451\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0441\u0435\u0440\u0432\u0438\u0441\u0443 \u0438 \u0437\u0430 \u0442\u043e \u0447\u0442\u043e \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u0432 \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442 \u043e\u0434\u043d\u0443 \u0438 \u0442\u0443 \u0436\u0435 \u043a\u043e\u043c\u043c\u0430\u043d\u0434\u0443. \u0420\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u044b\u0432\u0430\u0442\u044c \u044d\u0442\u043e \u043d\u0430 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u043e\u0439 \u0411\u0414 \u0431\u044b\u043b\u043e \u0431\u044b \u0441\u043b\u043e\u0436\u043d\u0435\u0439"}),"\n",(0,s.jsxs)(n.p,{children:["\u0414\u043b\u044f PHP-\u0434\u0435\u043c\u043e\u043d\u043e\u0432, \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 rabbitMQ \u0434\u0435\u043b\u0430\u0435\u0442\u0441\u044f \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e\xa0",(0,s.jsx)(n.a,{href:"https://github.com/php-amqplib/php-amqplib",children:"php-amqplib"}),"\xa0\u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 \u0438 \u0431\u0435\u0441\u043a\u043e\u043d\u0435\u0447\u043d\u044b\u0439 \u0446\u0438\u043a\u043b \u0432 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442 \u0437\u0430\u0432\u0438\u0441\u0435\u0442\u044c \u043e\u0442 \u043d\u0435\u0451.."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"$callback = function($msg){\n    //actual work here\n    $data = json_decode($msg->body, true);\n    \n    //Ack message that everything is done\n    $msg->delivery_info['channel']->basic_ack($msg->delivery_info['delivery_tag']);\n}\n\n\n//technical details..\n$connection = new AMQPStreamConnection('localhost', 5672, 'root', 'pass');\n$channel    = $connection->channel();\n\n//new queue if it was missing\n$channel->queue_declare($queue, false, true, false, false);\n\n//one entry at a time\n$channel->basic_qos(null, 1, null);\n$channel->basic_consume($queue, $receiverName, false, false, false, false, $callback);\n\n//almost infinite cycle\nwhile (count($channel->callbacks)) {\n\t$channel->wait(null);\n}\n\n$channel->close();\n$connection->close();\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u041f\u043e\u043d\u044f\u0442\u043d\u043e \u0447\u0442\u043e \u043e\u0434\u0438\u043d \u0441\u0435\u0440\u0432\u0438\u0441 \u0445\u043e\u0440\u043e\u0448\u043e, \u043d\u043e \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430 \u0446\u0435\u043d\u043d\u0430 \u0438\u043c\u0435\u043d\u043d\u043e \u0442\u0435\u043c \u0447\u0442\u043e \u0441\u0435\u0440\u0432\u0438\u0441\u044b \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0442 \u043c\u0435\u0436\u0434\u0443 \u0441\u043e\u0431\u043e\u0439. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043c\u043e\u0436\u043d\u043e \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u043c\u0443 \u0441\u0435\u0440\u0432\u0438\u0441\u0443. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u0435\u0441\u043b\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043b\u043e\u0441\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435, \u0437\u043d\u0430\u0447\u0438\u0442 \u043d\u0430\u0434\u043e \u043e\u043f\u043e\u0432\u0435\u0441\u0442\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c UI."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"$queue = 'datasync';\n$message = ['imageID'=>34, 'status'=>'processed'];\n$message = json_encode($message);\n\n$connection = new AMQPStreamConnection($server, $port, $login, $pass);\n$channel    = $connection->channel();\n$channel->queue_declare($queue, false, true, false, false);\n\n$channel->basic_publish(new AMQPMessage($message, ['delivery_mode' => 2]), '', $routeKey);\n$channel->close();\n$connection->close();\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u043f\u0435\u0440\u0441\u043f\u0435\u043a\u0442\u0438\u0432\u044b",children:"\u041f\u0435\u0440\u0441\u043f\u0435\u043a\u0442\u0438\u0432\u044b"}),"\n",(0,s.jsx)(n.p,{children:"\u0411\u043e\u043b\u0435\u0435 \u0441\u0435\u0440\u044c\u0451\u0437\u043d\u044b\u0435 \u0441\u0435\u0440\u0432\u0438\u0441\u044b \u043f\u0438\u0448\u0443\u0442\u0441\u044f \u043d\u0430 nodejs, \u0430 \u043b\u0443\u0447\u0448\u0435 \u043d\u0430 Go."}),"\n",(0,s.jsxs)(n.p,{children:["\u0413\u0440\u0443\u0431\u043e \u0433\u043e\u0432\u043e\u0440\u044f, \u0435\u0441\u043b\u0438 \u043f\u0440\u043e\u0433\u043d\u0430\u0442\u044c\xa0",(0,s.jsx)(n.a,{href:"https://github.com/tsenart/vegeta",children:"\u043d\u0430\u0433\u0440\u0443\u0437\u043e\u0447\u043d\u044b\u0439 \u0442\u0435\u0441\u0442"}),", \u0442\u043e \u0441 PHP \u0432\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 300 req/s, \u0442\u043e\u0433\u0434\u0430 \u043a\u0430\u043a \u0441 node 7000 req/s, \u0430 \u0441 go 9000 req/s."]}),"\n",(0,s.jsxs)(n.p,{children:["\u0421 Go \u043c\u043e\u0436\u043d\u043e \u043a\u043e\u043f\u0430\u0442\u044c \u0432 \u0441\u0442\u043e\u0440\u043e\u043d\u0443\xa0",(0,s.jsx)(n.a,{href:"https://github.com/micro/go-micro",children:"go-micro"})]}),"\n",(0,s.jsx)(n.p,{children:"\u0421\u043c. \u0442\u0430\u043a\u0436\u0435"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"http://kamashev.name/2011/05/daemons-base/",children:"\u0414\u0435\u043c\u043e\u043d\u044b \u2014 \u041e\u0441\u043d\u043e\u0432\u044b"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"http://kamashev.name/2011/06/daemons-signals/",children:"\u0414\u0435\u043c\u043e\u043d\u044b \u2014 \u0421\u0438\u0433\u043d\u0430\u043b\u044b"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"http://kvz.io/blog/2009/01/09/create-daemons-in-php/",children:"Create Daemons in PHP"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.sitepoint.com/php-rabbitmq-advanced-examples/",children:"PHP and RabbitMQ : Advanced examples"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.rabbitmq.com/tutorials/tutorial-one-php.html",children:"RabbitMQ introduction"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.digitalocean.com/community/tutorials/how-to-install-and-manage-rabbitmq",children:"How to Install and Manage RabbitMQ"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://rclayton.silvrback.com/failing-at-microservices",children:"Failing at Microservices"})}),"\n"]}),"\n",(0,s.jsx)("iframe",{width:"467",height:"260",src:"https://www.youtube.com/embed/6yy4vyZFTsM",title:'Maxim Sidorenko - "Microservices architecture in Online Card Processing"',frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:!0}),"\n",(0,s.jsx)("iframe",{width:"467",height:"260",src:"https://www.youtube.com/embed/hcHKOqMGd-c",title:"\u041c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441\u044b: \u043f\u0435\u0440\u0432\u0430\u044f \u043a\u0440\u043e\u0432\u044c: \u0432\u0438\u0434\u0435\u043e \u0434\u043e\u043a\u043b\u0430\u0434\u0430 (Dev Labs 2016)",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:!0}),"\n",(0,s.jsx)("iframe",{width:"467",height:"260",src:"https://www.youtube.com/embed/tJHVM198suE",title:"\u0412\u0438\u0442\u0430\u043b\u0438\u0439 \u0411\u0430\u0443\u043c \u2014 \u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u044b \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u041c\u0438\u043a\u0440\u043e\u0441\u0435\u0440\u0432\u0438\u0441\u043e\u0432",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:!0}),"\n",(0,s.jsx)("iframe",{width:"467",height:"260",src:"https://www.youtube.com/embed/PFQnNFe27kU",title:"Principles Of Microservices by Sam Newman",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:!0})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>t});var s=r(96540);const i={},l=s.createContext(i);function c(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);